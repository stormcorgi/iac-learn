# Federation
# ----------
# This identifies your server and cannot be changed safely later
# ----------
LOCAL_DOMAIN=mastodon.motcha.tech

{% if 'web' in group_names %}
# Concurrency configuration
WEB_CONCURRENCY=0
MAX_THREADS=5
{% endif %}

# Redis
# -----
{% if redis_url is defined %}
REDIS_URL={{redis_url}}
{% else %}
REDIS_HOST={{redis_host}}
{% endif %}
REDIS_PORT=6379
# PostgreSQL
# ----------
DB_HOST={{db_host}}
DB_USER=mastodon
DB_NAME=mastodon_production
# not pgbouncer
DB_PORT=5432
DB_POOL=15
{% else %}
# pgbouncer
DB_PORT=6432
{% endif %}

# Elasticsearch (optional)
# ------------------------
ES_ENABLED=false
ES_HOST=localhost
ES_PORT=9200
# Authentication for ES (optional)
ES_USER=elastic
ES_PASS=password

# Secrets
# -------
# Make sure to use `rake secret` to generate secrets
# -------
# Web Push
# --------
# Generate with `rake mastodon:webpush:generate_vapid_key`
# --------
# Sending mail
# ------------
SMTP_LOGIN=SMTP_Injection
SMTP_FROM_ADDRESS=root@mastodon.motcha.tech
SMTP_AUTH_METHOD=plain
SMTP_OPENSSL_VERIFY_MODE=none
SMTP_ENABLE_STARTTLS_AUTO=true

# File storage (optional)
# -----------------------
S3_ENABLED=true
# S3_BUCKET=mstdn-motcha
S3_BUCKET=img.motcha.tech
S3_PROTOCOL=https

#S3_HOSTNAME=s3.ap-northeast-1.amazonaws.com

# Optional alias for S3 (e.g. to serve files on a custom domain, possibly using Cloudfront or Cloudflare)
# S3_ALIAS_HOST=
# S3_ALIAS_HOST=img.motcha.tech.s3.ap-northeast-1.amazonaws.com
S3_ALIAS_HOST=img.motcha.tech
# S3_ALIAS_HOST=res.cloudinary.com/motcha/image/upload/s3

# Optionally change default language
DEFAULT_LOCALE=ja
{% if redis_url is defined %}
# not pgbouncer
{% else %}
# pgbouncer
PREPARED_STATEMENTS=false
{% endif %}